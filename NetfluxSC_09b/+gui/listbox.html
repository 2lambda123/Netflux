<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of listbox</title>
  <meta name="keywords" content="listbox">
  <meta name="description" content="gui.listbox">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">NetfluxSC_09b</a> &gt; <a href="index.html">+gui</a> &gt; listbox.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for NetfluxSC_09b\+gui&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>listbox
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>gui.listbox</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> gui.listbox
    A widget for selecting from a scrollable list

    w = gui.listbox creates a widget that displays a
    scrollable list and allows the user to select one or more
    items in it. The widget is added to the current
    autogui (if there is no current autogui, one is created).

    w = gui.listbox(M) creates the widget with the label
    string M.

    w = gui.listbox(M,S) creates the widget with the label
    string M, and list S (a cell array of strings).

    w = gui.listbox(M,S,G) creates the widget with the
    label string M and list S, and adds it to the gui
    container G.

  Sample usage:
     g = gui.autogui;
    w1 = gui.listbox;
    w2 = gui.listbox('Filter type', {'Lowpass', 'Highpass'});
    w3 = gui.listbox('Filter type', {'Lowpass', 'Highpass'}, g);

    Also see: 
    &lt;a href=&quot;matlab:help gui.listbox.Value&quot;&gt;gui.listbox.Value&lt;/a&gt;
    &lt;a href=&quot;matlab:help gui.textmenu&quot;&gt;gui.textmenu&lt;/a&gt;
    &lt;a href=&quot;matlab:help gui.numericmenu&quot;&gt;gui.numericmenu&lt;/a&gt;</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="listbox.html" class="code" title="">listbox</a>	gui.listbox</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="listbox.html" class="code" title="">listbox</a>	gui.listbox</li><li><a href="textbox.html" class="code" title="">textbox</a>	gui.listbox</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj = listbox(labelStr, menuItems, varargin)</a></li><li><a href="#_sub2" class="code">function set.MenuItems(obj, itemList)</a></li><li><a href="#_sub3" class="code">function out = get.MenuItems(obj)</a></li><li><a href="#_sub4" class="code">function out = get.AllowMultipleSelections(obj)</a></li><li><a href="#_sub5" class="code">function set.AllowMultipleSelections(obj,val)</a></li><li><a href="#_sub6" class="code">function out = get.Value(obj)</a></li><li><a href="#_sub7" class="code">function set.Value(obj , val)</a></li><li><a href="#_sub8" class="code">function initNotify(obj)</a></li><li><a href="#_sub9" class="code">function postPositionChange(obj, pos)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% gui.listbox</span>
0002 <span class="comment">%    A widget for selecting from a scrollable list</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%    w = gui.listbox creates a widget that displays a</span>
0005 <span class="comment">%    scrollable list and allows the user to select one or more</span>
0006 <span class="comment">%    items in it. The widget is added to the current</span>
0007 <span class="comment">%    autogui (if there is no current autogui, one is created).</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%    w = gui.listbox(M) creates the widget with the label</span>
0010 <span class="comment">%    string M.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%    w = gui.listbox(M,S) creates the widget with the label</span>
0013 <span class="comment">%    string M, and list S (a cell array of strings).</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%    w = gui.listbox(M,S,G) creates the widget with the</span>
0016 <span class="comment">%    label string M and list S, and adds it to the gui</span>
0017 <span class="comment">%    container G.</span>
0018 <span class="comment">%</span>
0019 <span class="comment">%  Sample usage:</span>
0020 <span class="comment">%     g = gui.autogui;</span>
0021 <span class="comment">%    w1 = gui.listbox;</span>
0022 <span class="comment">%    w2 = gui.listbox('Filter type', {'Lowpass', 'Highpass'});</span>
0023 <span class="comment">%    w3 = gui.listbox('Filter type', {'Lowpass', 'Highpass'}, g);</span>
0024 <span class="comment">%</span>
0025 <span class="comment">%    Also see:</span>
0026 <span class="comment">%    &lt;a href=&quot;matlab:help gui.listbox.Value&quot;&gt;gui.listbox.Value&lt;/a&gt;</span>
0027 <span class="comment">%    &lt;a href=&quot;matlab:help gui.textmenu&quot;&gt;gui.textmenu&lt;/a&gt;</span>
0028 <span class="comment">%    &lt;a href=&quot;matlab:help gui.numericmenu&quot;&gt;gui.numericmenu&lt;/a&gt;</span>
0029 
0030 <span class="comment">%   Copyright 2009 The MathWorks, Inc.</span>
0031 
0032 classdef (Sealed) <a href="listbox.html" class="code" title="">listbox</a> &lt; gui.labeleduicontrol
0033 
0034     properties(Dependent)
0035         <span class="comment">% Value</span>
0036         <span class="comment">%   A string or cell array of strings indicating the current list</span>
0037         <span class="comment">%   selection (the MenuItems property specifies items of the list).</span>
0038         <span class="comment">%</span>
0039         <span class="comment">%   Sample usage:</span>
0040         <span class="comment">%    s = gui.listbox('Choose colors', {'Red', 'Green', 'Blue', 'Yellow'});</span>
0041         <span class="comment">%</span>
0042         <span class="comment">%    s.AllowMultipleSelections = true;</span>
0043         <span class="comment">%    s.Value % get the value (a cell array of strings)</span>
0044         <span class="comment">%    s.Value = {'Red', 'Blue'}; % set the value</span>
0045         <span class="comment">%    s.Value = []; % clear all selections</span>
0046         <span class="comment">%</span>
0047         <span class="comment">%    s.AllowMultipleSelections = false;</span>
0048         <span class="comment">%    s.Value % get the value (a string)</span>
0049         <span class="comment">%    s.Value = 'Green'; % set the value</span>
0050         Value 
0051     <span class="keyword">end</span>
0052     
0053     properties(Dependent)
0054         <span class="comment">% MenuItems</span>
0055         <span class="comment">%   A cell array of strings specifying the items of the list. Whenever</span>
0056         <span class="comment">%   the MenuItems property is modified, the Value property is reset</span>
0057         <span class="comment">%   to the first item in the list.</span>
0058         <span class="comment">%</span>
0059         <span class="comment">%   Sample usage:</span>
0060         <span class="comment">%    initialColors = {'Red', 'Green'};</span>
0061         <span class="comment">%    s = gui.listbox('Choose a color', initialColors);</span>
0062         <span class="comment">%    % change the menu items</span>
0063         <span class="comment">%    s.MenuItems = {'Yellow', 'Blue', 'Black', 'Red'};</span>
0064         <span class="comment">%    s.Value % automatically reset to 'Yellow'</span>
0065         MenuItems
0066         
0067         <span class="comment">% AllowMultipleSelections</span>
0068         <span class="comment">%   A boolean that indicates whether multiple list items can be</span>
0069         <span class="comment">%   selected or not.</span>
0070         <span class="comment">%</span>
0071         <span class="comment">%   true  =&gt; Multiple list items can be selected (using</span>
0072         <span class="comment">%            Ctrl-Click). The Value property returns a</span>
0073         <span class="comment">%            cell array of strings.</span>
0074         <span class="comment">%   false =&gt; Only one list item can be  selected at a time. The</span>
0075         <span class="comment">%            Value property returns a string.</span>
0076         <span class="comment">%</span>
0077         <span class="comment">%   Sample usage:</span>
0078         <span class="comment">%    s = gui.listbox('Choose colors', {'Red', 'Green', 'Blue', 'Yellow'});</span>
0079         <span class="comment">%    s.AllowMultipleSelections = false;</span>
0080         AllowMultipleSelections
0081     <span class="keyword">end</span>
0082     
0083     methods
0084         <a name="_sub0" href="#_subfunctions" class="code">function obj = listbox(labelStr, menuItems, varargin)</a>
0085             
0086             <span class="keyword">if</span> ~exist(<span class="string">'labelStr'</span>, <span class="string">'var'</span>)
0087                 labelStr = <span class="string">'Choose one or more menu items'</span>;
0088             <span class="keyword">end</span>
0089             <span class="keyword">if</span> ~exist(<span class="string">'menuItems'</span>, <span class="string">'var'</span>)
0090                 menuItems = {<span class="string">'Option 1'</span>, <span class="string">'Option 2'</span>, <span class="string">'Option 3'</span>};
0091             <span class="keyword">end</span>
0092 
0093             obj = obj@gui.labeleduicontrol(<span class="string">'listbox'</span>,labelStr,varargin{:});
0094             assert(~obj.Initialized &amp;&amp; ~obj.Visible);
0095             
0096             <span class="comment">% Later calls to setSizeInFlow(...) etc.</span>
0097             <span class="comment">% assume UiHandle is a uiflowcontainer</span>
0098             assert(strcmp(get(obj.UiHandle,<span class="string">'type'</span>), <span class="string">'uiflowcontainer'</span>));
0099             
0100             set(obj.UiControl,<span class="string">'Min'</span>,0);
0101             
0102             obj.MenuItems = menuItems;
0103             obj.AllowMultipleSelections = true;
0104             
0105             obj.Initialized = true;
0106             obj.Visible = true;
0107             
0108         <span class="keyword">end</span>
0109 
0110     <span class="keyword">end</span>
0111     
0112     methods
0113         <a name="_sub1" href="#_subfunctions" class="code">function set.MenuItems(obj, itemList)</a>
0114             <span class="keyword">if</span> ~(ischar(itemList) || iscellstr(itemList))
0115                 throw(MException(<span class="string">'menu:set'</span>, <span class="string">'MenuItems should be a string or a cell array of strings'</span>));
0116             <span class="keyword">end</span>
0117             itemList = cellstr(itemList);
0118             <span class="comment">% get unique items in the same order as their occurrence in itemlist</span>
0119             [uniqueItems,indices] = unique(itemList,<span class="string">'first'</span>);
0120 <span class="comment">%             if numel(uniqueItems) &lt; numel(itemList)</span>
0121 <span class="comment">%                 warning('listbox:DuplicateMenuItems', 'Ignoring duplicate menu items');</span>
0122 <span class="comment">%                 itemList = itemList(sort(indices));</span>
0123 <span class="comment">%             end</span>
0124             set(obj.UiControl,<span class="string">'String'</span>, itemList);
0125             obj.Value = itemList{1};
0126         <span class="keyword">end</span>
0127 
0128         <a name="_sub2" href="#_subfunctions" class="code">function out = get.MenuItems(obj)</a>
0129             out = get(obj.UiControl, <span class="string">'String'</span>);
0130         <span class="keyword">end</span>
0131     
0132         <a name="_sub3" href="#_subfunctions" class="code">function out = get.AllowMultipleSelections(obj)</a>
0133             out = get(obj.UiControl,<span class="string">'Max'</span>) &gt; 1;
0134         <span class="keyword">end</span>
0135 
0136         <a name="_sub4" href="#_subfunctions" class="code">function set.AllowMultipleSelections(obj,val)</a>
0137             <span class="keyword">if</span> val
0138                 set(obj.UiControl,<span class="string">'Max'</span>,2);
0139             <span class="keyword">else</span>
0140                 set(obj.UiControl,<span class="string">'Max'</span>,1);
0141             <span class="keyword">end</span>
0142         <span class="keyword">end</span>
0143         
0144         <span class="comment">% Set the Value property to an empty matrix [] to have no selection</span>
0145         <span class="comment">% if mult. sel, value can be a vector of indices</span>
0146         
0147         <a name="_sub5" href="#_subfunctions" class="code">function out = get.Value(obj)</a>
0148             
0149             indices = get(obj.UiControl, <span class="string">'Value'</span>);
0150             items = obj.MenuItems;
0151              <span class="keyword">if</span> obj.AllowMultipleSelections
0152                  out = items(indices);
0153              <span class="keyword">else</span>
0154                  out = items{indices};
0155              <span class="keyword">end</span>
0156          <span class="keyword">end</span>
0157         
0158         <a name="_sub6" href="#_subfunctions" class="code">function set.Value(obj , val)</a>
0159             items = obj.MenuItems;
0160             allowMultipleSel = obj.AllowMultipleSelections;
0161             <span class="keyword">try</span>                
0162                 <span class="keyword">if</span> ~(isempty(val) || ischar(val) || iscellstr(val))
0163                     throw(MException(<span class="string">'listbox:InvalidValue'</span>,<span class="string">'Invalid value'</span>));
0164                 <span class="keyword">end</span>
0165                 <span class="keyword">if</span> ~isempty(val)
0166                     val = cellstr(val);
0167                 <span class="keyword">end</span>
0168                 <span class="keyword">if</span> numel(val) &gt; 1,
0169                     val = unique(val); 
0170                 <span class="keyword">end</span>
0171                 <span class="keyword">if</span> ~allowMultipleSel &amp;&amp; (numel(val) ~= 1)
0172                     throw(MException(<span class="string">'listbox:InvalidValue'</span>,<span class="string">'Invalid value'</span>));
0173                 <span class="keyword">end</span>
0174                 <span class="comment">% convert val to list of indices</span>
0175                 indices = zeros(1,numel(val));
0176                 <span class="keyword">for</span> i = 1:numel(val)
0177                     index = strmatch(val{i}, items, <span class="string">'exact'</span>);
0178                     <span class="keyword">if</span> isempty(index)
0179                         throw(MException(<span class="string">'listbox:InvalidValue'</span>,<span class="string">'Invalid value'</span>));
0180                     <span class="keyword">end</span>
0181                     indices(i) = index; 
0182                 <span class="keyword">end</span>
0183             <span class="keyword">catch</span> ME <span class="comment">%#ok&lt;NASGU&gt;</span>
0184                 <span class="keyword">if</span> strcmp(ME.identifier,<span class="string">'listbox:InvalidValue'</span>)
0185                     throw(MException(<span class="string">'listbox:InvalidValue'</span>, <span class="keyword">...</span>
0186                         <span class="string">'Value should be a a single string (multiple selections are not allowed)'</span>));
0187                 <span class="keyword">else</span>
0188                     itemsString = sprintf(<span class="string">' ''%s''\n'</span>, items{:});
0189                     throw(MException(<span class="string">'listbox:InvalidValue'</span>, <span class="keyword">...</span>
0190                         <span class="string">'Values should match one of the menu items:\n%s'</span>, <span class="keyword">...</span>
0191                         itemsString));
0192                 <span class="keyword">end</span>
0193             <span class="keyword">end</span>
0194 
0195             set(obj.UiControl,<span class="string">'Value'</span>, indices);
0196             notify(obj, <span class="string">'ValueChanged'</span>);
0197         <span class="keyword">end</span>
0198         
0199     <span class="keyword">end</span>
0200 
0201     methods(Access=protected)
0202         
0203         <span class="comment">% called upon initialization</span>
0204         <a name="_sub7" href="#_subfunctions" class="code">function initNotify(obj)</a>
0205             <a href="#_sub8" class="code" title="subfunction initNotify(obj)">initNotify</a>@gui.labeleduicontrol(obj);
0206             
0207             <span class="comment">% figure out the default height of the listbox</span>
0208             <span class="comment">% the +0.5 is just a layout adjustment tweak</span>
0209             labelSize = get(obj.UiLabel, <span class="string">'Extent'</span>); <span class="comment">% [0 0 width height]</span>
0210             obj.Position = struct(<span class="string">'height'</span>, (numel(obj.MenuItems)+0.8) * labelSize(4) + 10);
0211             
0212             obj.LabelLocation = <span class="string">'above'</span>;
0213         <span class="keyword">end</span>
0214 
0215         
0216         <span class="comment">% override method</span>
0217         <span class="comment">% pos is a vector [x y w h]</span>
0218         <a name="_sub8" href="#_subfunctions" class="code">function postPositionChange(obj, pos)</a>
0219             nans = isnan(pos(3:4));
0220             <span class="keyword">if</span> all(nans), <span class="keyword">return</span>; <span class="keyword">end</span>
0221             <span class="keyword">if</span> nans(1)
0222                 pos(3) = obj.getPositionWidth();
0223             <span class="keyword">end</span>
0224             <span class="keyword">if</span> nans(2)
0225                 pos(4) = obj.getPositionHeight();
0226             <span class="keyword">end</span>
0227             w = pos(3); h = pos(4);
0228             
0229             <span class="keyword">switch</span> obj.LabelLocation
0230                 <span class="keyword">case</span> <span class="string">'none'</span>
0231                     labelpos = [];
0232                     ctrlpos = [round(0.95 * w)  round(0.97 * h)];
0233                 <span class="keyword">case</span> {<span class="string">'above'</span>,<span class="string">'below'</span>}
0234                     labelSizeNeeded = get(obj.UiLabel,<span class="string">'extent'</span>); <span class="comment">% [0 0 width height]</span>
0235                     labelratio = min(0.45, labelSizeNeeded(4) / h);
0236                     ctrlratio = 1-labelratio-0.1;
0237                     labelpos = [round(0.95 * w) round(labelratio * h)];
0238                     ctrlpos =  [round(0.95 * w) round(ctrlratio * h)];
0239                 <span class="keyword">case</span> {<span class="string">'left'</span>, <span class="string">'right'</span>}
0240                     labelpos = [round(0.55 * w) round(0.90 * h)];
0241                     ctrlpos =  [round(0.40 * w) round(0.90 * h)];
0242             <span class="keyword">end</span>
0243             
0244             <span class="comment">% we know UiControl and UiLabel are in a flowcontainer</span>
0245             gui.util.uiposition.setSizeInFlow(obj.UiControl, ctrlpos);            
0246             <span class="keyword">if</span> ~isempty(labelpos)
0247                 gui.util.uiposition.setSizeInFlow(obj.UiLabel, labelpos);
0248             <span class="keyword">end</span>                            
0249         <span class="keyword">end</span>
0250         
0251     <span class="keyword">end</span>
0252     
0253 
0254     
0255 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 07-Aug-2014 13:40:59 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>